<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="node_modules/konva/konva.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #f0f0f0;
      height: 100%;
      overflow: auto;
    }
  </style>
</head>

<body>
  <h2>Hell on the left, board on mid and Heaven on the right</h2>

  <div id="container"></div>
  <script>
    var width = window.innerWidth;
    var height = window.innerHeight;
    var stage = new Konva.Stage({
      container: 'container',
      width: width,
      height: height,


    });

    var layer = new Konva.Layer();
    stage.add(layer);

    board_starting_point = {
      x: 200,
      y: 20
    };

    var boardBackground = new Konva.Rect({
      x: board_starting_point.x,
      y: board_starting_point.y,
      width: 1460,
      height: 780,
      fill: "brown",
      stroke: 'black',
      strokeWidth: 4,
      opacity: 0.4
    });

    var boardOffSide = new Konva.Rect({
      x: board_starting_point.x + 20,
      y: board_starting_point.y + 20,
      width: 700,
      height: 740,
      fill: "red",
      stroke: 'black',
      strokeWidth: 4,
      opacity: 0.2
    });

    var boardHomeSide = new Konva.Rect({
      x: board_starting_point.x + 740,
      y: board_starting_point.y + 20,
      width: 700,
      height: 740,
      fill: "green",
      stroke: 'black',
      strokeWidth: 4,
      opacity: 0.2
    });

    // var poly_spot_5 = new Konva.Line({
    //   points: [920, 50, 1000, 50, 955, 350],
    //   fill: '#00D2FF',
    //   stroke: 'black',
    //   strokeWidth: 5,
    //   closed: true,
    // });

    class Spot {
      constructor(spotIndex, x, y) {
        this.spotIndex = spotIndex;
        this.x = x;
        this.y = y;
        this.chips = [];
      }
    }
    let spotsOnTheBoard = [];
    let spotIndex = 0;

    spots_starting_points = {
      x_values: {
        off_top: board_starting_point.x + 50,
        off_bottom: board_starting_point.x + 50,
        home_top: board_starting_point.x + 760,
        home_bottom: board_starting_point.x + 760
      },

      y_values: {
        off_top: board_starting_point.y + 40,
        off_bottom: board_starting_point.y + 740,
        home_top: board_starting_point.y + 40,
        home_bottom: board_starting_point.y + 740
      }
    }



    // generate out of the home side top spots
    function generate_off_top_spots() { // replicate this for the other 3 segments
      
      for (var i = 11; i >= 6; i--) { //generate_off_top_spots
        let spot = new Konva.Line({
          points: [spots_starting_points.x_values.off_top, spots_starting_points.y_values.off_top,
          spots_starting_points.x_values.off_top + 90, spots_starting_points.y_values.off_top,
          spots_starting_points.x_values.off_top + 45, spots_starting_points.y_values.off_top + 310],
          fill: '#00D2FF',
          stroke: 'black',
          strokeWidth: 5,
          closed: true,
          opacity: 0.4
        });

        let newSpot = new Spot(i, spots_starting_points.x_values.off_top, spots_starting_points.y_values.off_top);
        if (i % 2 == 0) {
          spot.attrs.fill = "#eeeee4";
        }
        console.log(spot.attrs.fill);
        spotsOnTheBoard.push(newSpot);
        spots_starting_points.x_values.off_top += 110;
        layer.add(spot);
      }
      // let newSpot = new Spot(0, spots_starting_points.x_values.off_top, spots_starting_points.y_values.off_top);






    };




    // generate out of the home side bottom spots
    function generate_off_bottom_spots() {
      let spot = new Konva.Line({
        points: [spots_starting_points.x_values.off_bottom, spots_starting_points.y_values.off_bottom,
        spots_starting_points.x_values.off_bottom + 90, spots_starting_points.y_values.off_bottom,
        spots_starting_points.x_values.off_bottom + 45, spots_starting_points.y_values.off_bottom - 310],
        fill: '#eeeee4',
        stroke: 'black',
        strokeWidth: 5,
        closed: true,
        opacity: 0.4
      });
      spots_starting_points.x_values.off_bottom += 110;
      console.log(spots_starting_points.x_values.off_bottom + " this is for the bottom lines");

      return spot;
    };


    // generate inside the home side top spots
    function generate_home_top_spots() {
      let spot = new Konva.Line({
        points: [spots_starting_points.x_values.home_top, spots_starting_points.y_values.home_top,
        spots_starting_points.x_values.home_top + 90, spots_starting_points.y_values.home_top,
        spots_starting_points.x_values.home_top + 45, spots_starting_points.y_values.home_top + 310],
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 5,
        closed: true,
        opacity: 0.4
      });
      spots_starting_points.x_values.home_top += 110;
      console.log(spots_starting_points.x_values.home_top);


      return spot;
    };




    // generate inside the home side bottom spots
    function generate_home_bottom_spots() {
      let spot = new Konva.Line({
        points: [spots_starting_points.x_values.home_bottom, spots_starting_points.y_values.home_bottom,
        spots_starting_points.x_values.home_bottom + 90, spots_starting_points.y_values.home_bottom,
        spots_starting_points.x_values.home_bottom + 45, spots_starting_points.y_values.home_bottom - 310],
        fill: '#eeeee4',
        stroke: 'black',
        strokeWidth: 5,
        closed: true,
        opacity: 0.4
      });
      spots_starting_points.x_values.home_bottom += 110;
      console.log(spots_starting_points.x_values.home_bottom + " this is for the bottom lines");

      return spot;
    };




    // old established version below
    //     top_side:{
    //             off_odd_spots_x_axis_starting_point : board_starting_point.x + 50,
    //             off_odd_spots_y_axis_starting_point : board_starting_point.y + 30,

    //             off_even_spots_x_axis_starting_point : board_starting_point.x + 160,
    //             off_even_spots_y_axis_starting_point : board_starting_point.y + 30,

    //             base_odd_spots_x_axis_starting_point : board_starting_point.x + 740,
    //             base_odd_spots_y_axis_starting_point : board_starting_point.y + 30,

    //             base_even_spots_x_axis_starting_point : board_starting_point.x + 850,
    //             base_even_spots_y_axis_starting_point : board_starting_point.y + 30,
    //             },

    //     bottom_side:{
    //             off_odd_spots_x_axis_starting_point : board_starting_point.x + 50,
    //             off_odd_spots_y_axis_starting_point : board_starting_point.y + 30,

    //             off_even_spots_x_axis_starting_point : board_starting_point.x + 160,
    //             off_even_spots_y_axis_starting_point : board_starting_point.y + 30,

    //             base_odd_spots_x_axis_starting_point : board_starting_point.x + 740,
    //             base_odd_spots_y_axis_starting_point : board_starting_point.y + 30,

    //             base_even_spots_x_axis_starting_point : board_starting_point.x + 850,
    //             base_even_spots_y_axis_starting_point : board_starting_point.y + 30,
    //             }
    //     };


    // // below we add the spots in the off_side

    //      function generate_off_top_odd_spots() {

    //     let spot = new Konva.Line({
    //     points: [spots_starting_points.top_side.off_odd_spots_x_axis_starting_point,spots_starting_points.top_side.off_odd_spots_y_axis_starting_point, 
    //             spots_starting_points.top_side.off_odd_spots_x_axis_starting_point+90, spots_starting_points.top_side.off_odd_spots_y_axis_starting_point , 
    //             spots_starting_points.top_side.off_odd_spots_x_axis_starting_point +45, spots_starting_points.top_side.off_odd_spots_y_axis_starting_point +300],
    //     // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //     // x  initial = 200
    //     // y initial = 20
    //     fill: '#00D2FF',
    //     stroke: 'black',
    //     strokeWidth: 5,
    //     closed: true,
    //   });
    //   spots_starting_points.top_side.off_odd_spots_x_axis_starting_point +=215;
    //   console.log(spots_starting_points.top_side.off_odd_spots_x_axis_starting_point);
    //   console.log(spots_starting_points.top_side.off_odd_spots_y_axis_starting_point);
    //         return spot;
    // };

    //     function generate_off_top_even_spots() {

    //         let spot = new Konva.Line({
    //         points: [spots_starting_points.top_side.off_even_spots_x_axis_starting_point ,spots_starting_points.top_side.off_even_spots_y_axis_starting_point, 
    //             spots_starting_points.top_side.off_even_spots_x_axis_starting_point+90, spots_starting_points.top_side.off_even_spots_y_axis_starting_point , 
    //             spots_starting_points.top_side.off_even_spots_x_axis_starting_point +45, spots_starting_points.top_side.off_even_spots_y_axis_starting_point +300],
    //         // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //         // x  initial = 200
    //         // y initial = 20
    //         stroke: 'black',
    //         strokeWidth: 5,
    //         closed: true,
    //       });
    //       spots_starting_points.top_side.off_even_spots_x_axis_starting_point +=215;
    //     //   console.log(spots_x_axis_starting_point);
    //     //   console.log(spots_y_axis_starting_point);
    //             return spot;
    //     };

    //     function generate_off_bottom_odd_spots() {

    //         let spot = new Konva.Line({
    //         points: [spots_starting_points.bottom_side.off_odd_spots_x_axis_starting_point + 45, spots_starting_points.top_side.off_odd_spots_y_axis_starting_point+350, 
    //                 spots_starting_points.bottom_side.off_odd_spots_x_axis_starting_point, spots_starting_points.top_side.off_odd_spots_y_axis_starting_point +690,
    //                 spots_starting_points.bottom_side.off_odd_spots_x_axis_starting_point +95, spots_starting_points.top_side.off_odd_spots_y_axis_starting_point +690],
    //         // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //         // x  initial = 200
    //         // y initial = 20
    //         fill: '#eeeee4',
    //         stroke: 'black',
    //         strokeWidth: 5,
    //         closed: true,
    //       });
    //       spots_starting_points.bottom_side.off_odd_spots_x_axis_starting_point +=215;
    //       console.log(spots_starting_points.top_side.off_odd_spots_x_axis_starting_point);
    //       console.log(spots_starting_points.top_side.off_odd_spots_y_axis_starting_point);
    //             return spot;
    //     };

    //     function generate_off_bottom_even_spots() {

    //         let spot = new Konva.Line({
    //         points: [spots_starting_points.bottom_side.off_even_spots_x_axis_starting_point + 45, spots_starting_points.top_side.off_even_spots_y_axis_starting_point+350, 
    //                 spots_starting_points.bottom_side.off_even_spots_x_axis_starting_point, spots_starting_points.top_side.off_even_spots_y_axis_starting_point +690,
    //                 spots_starting_points.bottom_side.off_even_spots_x_axis_starting_point +95, spots_starting_points.top_side.off_even_spots_y_axis_starting_point +690],
    //         // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //         // x  initial = 200
    //         // y initial = 20
    //         fill: '#00D2FF',
    //         stroke: 'black',
    //         strokeWidth: 5,
    //         closed: true,
    //       });
    //       spots_starting_points.bottom_side.off_even_spots_x_axis_starting_point +=215;
    //       console.log(spots_starting_points.top_side.off_even_spots_x_axis_starting_point);
    //       console.log(spots_starting_points.top_side.off_even_spots_y_axis_starting_point);
    //             return spot;
    //     };


    //     // below we add the spots in the base

    //         function generate_base_top_odd_spots() {

    //         let spot = new Konva.Line({
    //         points: [spots_starting_points.top_side.base_odd_spots_x_axis_starting_point,spots_starting_points.top_side.base_odd_spots_y_axis_starting_point , 
    //                 spots_starting_points.top_side.base_odd_spots_x_axis_starting_point+90, spots_starting_points.top_side.base_odd_spots_y_axis_starting_point , 
    //                 spots_starting_points.top_side.base_odd_spots_x_axis_starting_point +45, spots_starting_points.top_side.base_odd_spots_y_axis_starting_point +300],
    //         // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //         // x  initial = 200
    //         // y initial = 20
    //         fill: '#00D2FF',
    //         stroke: 'black',
    //         strokeWidth: 5,
    //         closed: true,
    //       });
    //       spots_starting_points.top_side.base_odd_spots_x_axis_starting_point +=215;
    //       console.log(spots_starting_points.top_side.base_odd_spots_x_axis_starting_point);
    //       console.log(spots_starting_points.top_side.base_odd_spots_y_axis_starting_point);
    //             return spot;
    //     };

    //         function generate_base_top_even_spots() {

    //             let spot = new Konva.Line({
    //             points: [spots_starting_points.top_side.base_even_spots_x_axis_starting_point ,spots_starting_points.top_side.base_even_spots_y_axis_starting_point, 
    //                 spots_starting_points.top_side.base_even_spots_x_axis_starting_point+90, spots_starting_points.top_side.base_even_spots_y_axis_starting_point , 
    //                 spots_starting_points.top_side.base_even_spots_x_axis_starting_point +45, spots_starting_points.top_side.base_even_spots_y_axis_starting_point +300],
    //             // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //             // x  initial = 200
    //             // y initial = 20
    //             fill: '#eeeee4',
    //             stroke: 'black',
    //             strokeWidth: 5,
    //             closed: true,
    //           });
    //           spots_starting_points.top_side.base_even_spots_x_axis_starting_point +=215;
    //         //   console.log(spots_x_axis_starting_point);
    //         //   console.log(spots_y_axis_starting_point);
    //                 return spot;
    //         };

    //         function generate_base_bottom_odd_spots() {

    //             let spot = new Konva.Line({
    //             points: [spots_starting_points.bottom_side.base_odd_spots_x_axis_starting_point + 45, spots_starting_points.bottom_side.base_odd_spots_y_axis_starting_point+350, 
    //                     spots_starting_points.bottom_side.base_odd_spots_x_axis_starting_point, spots_starting_points.bottom_side.base_odd_spots_y_axis_starting_point +690,
    //                     spots_starting_points.bottom_side.base_odd_spots_x_axis_starting_point +95, spots_starting_points.bottom_side.base_odd_spots_y_axis_starting_point +690],
    //                     fill: '#eeeee4',
    //             stroke: 'black',
    //             strokeWidth: 5,
    //             closed: true,
    //           });
    //           spots_starting_points.bottom_side.base_odd_spots_x_axis_starting_point +=215;
    //           console.log(spots_starting_points.bottom_side.base_odd_spots_x_axis_starting_point);
    //           console.log(spots_starting_points.bottom_side.base_odd_spots_y_axis_starting_point);
    //                 return spot;
    //         };

    //         function generate_base_bottom_even_spots() {

    //             let spot = new Konva.Line({
    //             points: [spots_starting_points.bottom_side.base_even_spots_x_axis_starting_point +45, spots_starting_points.top_side.base_even_spots_y_axis_starting_point+350, 
    //                     spots_starting_points.bottom_side.base_even_spots_x_axis_starting_point, spots_starting_points.top_side.base_even_spots_y_axis_starting_point +690,
    //                     spots_starting_points.bottom_side.base_even_spots_x_axis_starting_point +95, spots_starting_points.top_side.base_even_spots_y_axis_starting_point +690],
    //             // board_starting_point.x + 40,board_starting_point.y +30, board_starting_point.x + 120, board_starting_point.y +30, board_starting_point.x + 75, board_starting_point.y +150
    //             // x  initial = 200
    //             // y initial = 20
    //             fill: '#00D2FF',
    //             stroke: 'black',
    //             strokeWidth: 5,
    //             closed: true,
    //           });
    //           spots_starting_points.bottom_side.base_even_spots_x_axis_starting_point +=215;
    //           console.log(spots_starting_points.top_side.base_even_spots_x_axis_starting_point);
    //           console.log(spots_starting_points.top_side.base_even_spots_y_axis_starting_point);
    //                 return spot;
    //         };


    //         // below we add the spots to the layer

    //     for (var i = 0; i < 3; i++) { //generate_off_top_odd_spots
    //         layer.add(generate_off_top_odd_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_off_top_even_spots
    //         layer.add(generate_off_top_even_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_off_bottom_odd_spots
    //         layer.add(generate_off_bottom_odd_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_off_bottom_even_spots
    //         layer.add(generate_off_bottom_even_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_base_top_odd_spots
    //         layer.add(generate_base_top_odd_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_base_top_even_spots
    //         layer.add(generate_base_top_even_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_base_bottom_odd_spots
    //         layer.add(generate_base_bottom_odd_spots());

    //     }
    //     for (var i = 0; i < 3; i++) { //generate_base_bottom_even_spots()
    //         layer.add(generate_base_bottom_even_spots());

    //     }

    // old established version stops here

    var playersHell = new Konva.Rect({
      x: 70,
      y: 40,
      width: 90,
      height: 710,
      fill: "white",
      stroke: 'black',
      strokeWidth: 4,
      opacity: 0.2
    });
    //   var redHell = new Konva.Rect({
    //     x: 910,
    //     y: 40,
    //     width: 670,
    //     height: 710,
    //     fill: "green",
    //     stroke: 'black',
    //     strokeWidth: 4,
    //     opacity: 0.2
    //   });

    var playersHeaven = new Konva.Rect({
      x: 1680,
      y: 40,
      width: 90,
      height: 710,
      fill: "black",
      stroke: 'black',
      strokeWidth: 4,
      opacity: 0.4
    });
    var redCircle1 = new Konva.Circle({
      x: 110,
      y: 80,
      radius: 30,
      fill: 'red',
      stroke: 'black',
      strokeWidth: 4,
    });
    var redCircle2 = new Konva.Circle({
      x: 110,
      y: 100,
      radius: 30,
      fill: 'red',
      stroke: 'black',
      strokeWidth: 4,
    });
    var redCircle3 = new Konva.Circle({
      x: 1720,
      y: 80,
      radius: 30,
      fill: 'red',
      stroke: 'black',
      strokeWidth: 4,
      draggable: true
    });
    var redCircle4 = new Konva.Circle({
      x: 1720,
      y: 100,
      radius: 30,
      fill: 'red',
      stroke: 'black',
      strokeWidth: 4,
    });
    var redCircle5 = new Konva.Circle({
      x: 1700,
      y: 80,
      radius: 30,
      fill: 'red',
      stroke: 'black',
      strokeWidth: 4,
    });
    var redCircle6 = new Konva.Circle({
      x: 1700,
      y: 100,
      radius: 30,
      fill: 'red',
      stroke: 'black',
      strokeWidth: 4,
    });

    y_starting_red = 95;
    y_starting_white = 465;

    function generateRedPieces_spot5() {

      let circle = new Konva.Circle({
        x: 1005,
        y: y_starting_red,
        radius: 30,
        fill: 'red',
        stroke: 'black',
        draggable: true,
        opacity: 0.9
      });
      y_starting_red += 65;
      return circle;
    }

    function generatePiece(spot, color) {
      let numberOfChipsAlreadyOnSpot = spot.chips.length;
      let circle = new Konva.Circle({
        x: spot.x + 45,
        y: spot.y + (numberOfChipsAlreadyOnSpot == 0 ? 5 : 0) + 30 + 35 * 2 * numberOfChipsAlreadyOnSpot,
        radius: 30,
        fill: color == 'RED' ? 'red' : 'white',
        stroke: 'black',
        draggable: true,
        opacity: 0.9
      });
      return circle;
    }

    function generateWhitePieces_spot18() {

      let circle = new Konva.Circle({
        x: 1005,
        y: y_starting_white,
        radius: 30,
        fill: 'white',
        stroke: 'black',
        draggable: true,
        opacity: 0.9
      });
      y_starting_white += 65;
      return circle;
    }


    //   var redHeaven = new Konva.Rect({
    //     x: 910,
    //     y: 40,
    //     width: 670,
    //     height: 710,
    //     fill: "green",
    //     stroke: 'black',
    //     strokeWidth: 4,
    //     opacity: 0.2
    //   });

    layer.add(boardBackground);
    layer.add(boardOffSide);
    layer.add(boardHomeSide);
    layer.add(playersHell);
    layer.add(playersHeaven);
    layer.add(redCircle1);
    layer.add(redCircle2);
    layer.add(redCircle3);
    layer.add(redCircle4);



    generate_off_top_spots();
    console.log('spots all: ', spotsOnTheBoard);


    function placeChipOnSpot(spot, layer, color) {
      // color: "RED"
      let chip = generatePiece(spot, color);
      spot.chips.push(chip);
      layer.add(chip);

    }
    function removeChipFromSpot() {

    }
    // placeChipOnSpot(spotsOnTheBoard[0], {color: "RED"})

    for (var i = 0; i < 6; i++) { //generate_off_bottom_spots
      let spot_added = generate_off_bottom_spots();
      if (i % 2 == 0) {
        spot_added.attrs.fill = "#00D2FF";
      }
      layer.add(spot_added);
    }


    for (var i = 0; i < 6; i++) { //generate_home_top_spots
      let spot_added = generate_home_top_spots();
      if (i % 2 == 0) {
        spot_added.attrs.fill = "#eeeee4";
      }
      console.log(spot_added.attrs.fill);
      layer.add(spot_added);
    }


    for (var i = 0; i < 6; i++) { //generate_home_bottom_spots
      let spot_added = generate_home_bottom_spots();
      if (i % 2 == 0) {
        spot_added.attrs.fill = "#00D2FF";
      }
      layer.add(spot_added);
    }


    for (var i = 0; i < 5; i++) {
      layer.add(generateRedPieces_spot5());

    }
    // spot             Circle
    placeChipOnSpot(spotsOnTheBoard[0], layer, "RED");
    placeChipOnSpot(spotsOnTheBoard[3], layer, "RED");
    placeChipOnSpot(spotsOnTheBoard[0], layer, "WHITE");
    placeChipOnSpot(spotsOnTheBoard[3], layer, "WHITE");

    console.log(spotsOnTheBoard);

    for (var i = 0; i < 5; i++) {
      layer.add(generateWhitePieces_spot18());
    }



        // function generateNode() {
        //     return new Konva.Circle({
        //         x: WIDTH * Math.random(),
        //         y: HEIGHT * Math.random(),
        //         radius: 50,
        //         fill: 'red',
        //         stroke: 'black',
        //     });
        // }

        // for (var i = 0; i < NUMBER; i++) {
        //     layer.add(generateNode());
        // }
  </script>
</body>

</html>